let gPrices,gDate,usdBuy=document.querySelector("#usd > .sell-price > p.value"),usdSell=document.querySelector("#usd>.buy-price>.value"),eurBuy=document.querySelector("#eur>.sell-price>.value"),eurSell=document.querySelector("#eur>.buy-price>.value"),update=document.querySelector(".update"),usdArrow=document.querySelector("#usdArrow"),eurArrow=document.querySelector("#eurArrow"),url="https://viralcarbons.com/get.php";async function fetchData(){document.querySelector("#refreshIcon").classList.add("rotate"),await fetch(url).then(e=>e.json()).then(e=>{gPrices=e,localStorage.setItem("date",(new Date).toLocaleDateString()),localStorage.setItem("prices",JSON.stringify(e)),updatePrices(),update.classList.add("justUpdated"),setTimeout(()=>{update.classList.remove("justUpdated"),document.querySelector("#refreshIcon").classList.remove("rotate")},3e3)})}function updatePrices(){usdSell.textContent=gPrices.newPrices[0].sell_price,usdBuy.textContent=gPrices.newPrices[0].buy_price,gPrices.newPrices[0].sell_price<gPrices.oldPrices[0].sell_price?usdArrow.src="/assets/arrow-down.svg":usdArrow.src="/assets/arrow-up.svg",eurSell.textContent=gPrices.newPrices[1].sell_price,eurBuy.textContent=gPrices.newPrices[1].buy_price,gPrices.newPrices[1].sell_price<gPrices.oldPrices[1].sell_price?eurArrow.src="/assets/arrow-down.svg":eurArrow.src="/assets/arrow-up.svg"}localStorage.getItem("prices")&&(gPrices=JSON.parse(localStorage.getItem("prices")),updatePrices()),fetchData();
